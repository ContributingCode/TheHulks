package org.cloudfoundry.services;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import java.util.Properties;import javax.mail.MessagingException;import javax.mail.PasswordAuthentication;import javax.mail.Session;import javax.mail.internet.MimeMessage;import org.springframework.mail.javamail.JavaMailSenderImpl;import org.springframework.mail.javamail.MimeMessageHelper;public class EmailNotificationMgr {		static Map<Integer, List<String>> orgEmailInfo = new HashMap<Integer, List<String>>();	static Map<Integer, String> templateEmailMsg = new HashMap<Integer, String>();	 	public static void initEmailNotificationMgr() {				/** add all the org email addresses */		List<String> animalCause = new ArrayList<String>();		animalCause.add("askforhelpspeakup@gmail.com");		//animalCause.add("pramitchoudhary@gmail.com");		//animalCause.add("vishal.12.sahu@gmail.com");		orgEmailInfo.put(3, animalCause);				List<String> drunkCause = new ArrayList<String>();		drunkCause.add("askforhelpspeakup@gmail.com");		//dranunkCause.add("pramitchoudhary@gmail.com");		//drunkCause.add("vishal.12.sahu@gmail.com");		orgEmailInfo.put(2, drunkCause);				List<String> homelessCause = new ArrayList<String>();		homelessCause.add("askforhelpspeakup@gmail.com");		//homelessCause.add("pramitchoudhary@gmail.com");		//homelessCause.add("vishal.12.sahu@gmail.com");		orgEmailInfo.put(1, homelessCause);		List<String> otherCause = new ArrayList<String>();		otherCause.add("askforhelpspeakup@gmail.com");		//otherCause.add("pramitchoudhary@gmail.com");		//otherCause.add("vishal.12.sahu@gmail.com");		orgEmailInfo.put(4, otherCause);		/** add templated response for each type of cause */		templateEmailMsg.put(1, "There is a homeless incident");		templateEmailMsg.put(2, "There is an alchohol related incident");		templateEmailMsg.put(3, "There is an animal related incident");		templateEmailMsg.put(4, "An general incident was reported");	}		public static int sendMail(Integer causeType, Double latitude, Double longitude ) {				final String user = "askforhelpspeakup@gmail.com"; //askforhelpspeakup@gmail.com		final String pwd = "askforhelp"; //askforhelp			JavaMailSenderImpl sender = new JavaMailSenderImpl();		sender.setHost("smtp.gmail.com");		sender.setProtocol("smtp");		sender.setPassword(pwd);			Properties props = new Properties();		props.put("mail.smtp.auth", "true");		props.put("mail.smtp.starttls.enable", "true");		props.put("mail.smtp.host", "smtp.gmail.com");		props.put("mail.smtp.port", "587");				Session session = Session.getInstance(props,			new javax.mail.Authenticator() {				protected PasswordAuthentication getPasswordAuthentication() {					return new PasswordAuthentication(user, pwd);				}			}		);		sender.setJavaMailProperties(props);		sender.setSession(session);				MimeMessage message = sender.createMimeMessage();		MimeMessageHelper helper = new MimeMessageHelper(message);						try {			List<String> destMailAddr = orgEmailInfo.get(causeType);			for (int i = 0; i < destMailAddr.size(); i += 1) {				helper.setTo(destMailAddr.get(i));				helper.setSubject("New incident notification!");				helper.setText(templateEmailMsg.get(causeType) +" at " +						"http://maps.google.com/maps?q="+23.0+","+43.0+" + "+								"\n\nThank You");//"("+ latitude +", "+ longitude + ")				sender.send(message);			}					} catch (MessagingException e) {			e.printStackTrace();			return 1;		}				return 0;	}		public static void main(String args[]) {		EmailNotificationMgr.initEmailNotificationMgr();		if (0 != EmailNotificationMgr.sendMail(4,23.0,43.0)) {			System.err.println("Failed to send msg!");		}		else {			System.out.println("Successfully sent the msg");		}	}}